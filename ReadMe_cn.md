# MTCMB Â§ö‰ªªÂä°‰∏≠ÂåªËØÑ‰º∞Âü∫ÂáÜ 

<center>

![Python 3.12](https://img.shields.io/badge/Python-3.12-lightblue) ![Torch 2.3.1](https://img.shields.io/badge/PyTorch-2.3.1-lightblue) ![OpenAi 1.25.0](https://img.shields.io/badge/openai-1.25.0-lightblue) ![bert-score](https://img.shields.io/badge/bert--score-0.3.13-lightblue)
</center>


![title](https://github.com/Wayyuanyuan/MTCMB/blob/main/pics/title2.png)

<p align="center">
   üìÉ <a href="" target="_blank">Paper</a> ‚Ä¢ üåê <a href="" target="_blank">Website</a>  
   <br>  <a href="https://github.com/Wayyuanyuan/MTCMB/blob/main/ReadMe_cn.md">   ‰∏≠Êñá</a> | <a href="https://github.com/Wayyuanyuan/MTCMB/blob/main/ReadMe.md"> English
</p>


## üåà Êõ¥Êñ∞

- **[2025.5.15]** ÂèëÂ∏É‰∫ÜËÆ∫Êñá„ÄÇ
- **[2025.5.15]** üéâüéâüéâ MTCMB Ê≠£ÂºèÂèëÂ∏ÉÔºÅüéâüéâüéâ

## üåê Êï∞ÊçÆ‰∏ãËΩΩ

Ôºà1ÔºâZipÊ†ºÂºè

```python
  https://github.com/Wayyuanyuan/MTCMB.git && cd data
```

Ôºà2Ôºâ[Huggingface datasets](https://huggingface.co/datasets/Bunnybeck/MTCMB/tree/main)

## üìçÊéíË°åÊ¶ú‚Äã‚Äã
#### üîÜÈÄöÁî®Â§ßÊ®°Âûã

| Model                | 1.TCM-ED-A | 2.TCM-ED-B | 3.TCM-FT  | 4.TCMeEE | 5.TCM-CHGD | 6.TCM-LitData | 7.TCM-MSDD | 8.TCM-Diagnosis | 9.TCM-PR | 10.TCM-FRD | 11.SE-A   | 12.SE-B |
| -------------------- | ---------- | ---------- | --------- | -------- | ---------- | ------------- | ---------- | --------------- | -------- | ---------- | --------- | ------- |
| gpt-4.1              | 64.67      | 75.15      | 86.62     | 52       | 55         | 64            | 35         | 49              | 35       | 49         | 70.99     | 74      |
| gpt-4.1 Few-Shot     | 72.01      | 74.25      | 86.77     | 78       | 48         | 59            | 34.44      | 51              | 40       | 54         | 73.15     | 72.34   |
| gpt-4.1 CoT          | 73.02      | 72.05      | 88.17     | 72       | 47         | 64            | 35.46      | 51              | 40       | 54         | 72.76     | 68.09   |
| claude               | 59.42      | 59.58      | 85.93     | 69       | 50         | 56            | 12.75      | 39              | 31       | 36         | 58.76     | 48      |
| claude Few-Shot      | 64.24      | 62.96      | 87.58     | 79       | 51         | 55            | 38.52      | 44              | 38       | 38         | 64.94     | 55.32   |
| claude CoT           | 63.99      | 51.68      | 87.97     | 54       | 43         | 57            | 30.87      | 41              | 34       | 39         | 48.83     | 53.19   |
| gemini               | 83.5       | 86.6       | 88.33     | 77       | 46         | 65            | 32.25      | 46              | 37       | 39         | 82.04     | 86      |
| gemini Few-Shot      | 85.05      | 87.22      | 89.18     | 75       | 48         | 57            | 35.71      | 47              | 40       | 50         | 82.37     | 87.23   |
| gemini CoT           | 85.71      | 66.69      | 87.37     | 79       | 47         | 62            | 34.95      | 47              | 38       | 50         | 77.8      | 85.11   |
| qwen-max             | 86.92      | 90.54      | 87.43     | 51       | 50         | 68            | 30         | 49              | 36       | 44         | 77.16     | 78      |
| qwen-max Few-Shot    | 88.14      | 90.43      | 88.10     | 80       | 50         | 65            | 40.05      | 52              | 40       | 54         | 79.11     | 82.98   |
| qwen-max CoT         | 86.72      | 75.42      | 88.01     | 51       | 49         | **71**        | 38.01      | **53**          | 40       | 54         | 77.83     | 80.85   |
| glm-4-plus           | 83.83      | 87.25      | 87.67     | 82       | 47         | 64            | 32.5       | 46              | 37       | 38         | 72.73     | 74      |
| glm-4-plus Few-Shot  | 82.54      | 86.64      | 88.19     | 80       | 49         | 62            | 40.05      | 47              | 40       | 51         | 78.26     | 74.47   |
| glm-4-plus CoT       | 82.04      | 80.53      | 88.07     | 82       | 48         | 63            | 37.24      | 34              | **41**   | 50         | 78.96     | 74.47   |
| doubao               | **92.08**  | **94.21**  | 89.22     | 86       | 46         | 67            | 33.75      | 50              | 37       | 52         | 83.16     | **90**  |
| doubao Few-Shot      | 91.48      | 94.04      | 89.22     | 83       | **56**     | 62            | 39.54      | 51              | 39       | **58**     | 83.18     | 87.23   |
| doubao CoT           | 91.73      | 83.97      | **89.59** | 86       | 50         | 34            | 37.5       | 51              | 39       | 54         | 81.17     | 85.11   |
| DeepSeek-V3          | 89.08      | 91.17      | 87.66     | **87**   | 48         | 62            | 39.25      | 50              | 39       | 41         | **85.86** | 82      |
| DeepSeek-V3 Few-Shot | 89.64      | 90.95      | 88.30     | 83       | 52         | 61            | **41.33**  | 51              | 40       | 56         | 85.25     | 80.85   |
| DeepSeek-V3 CoT      | 88.47      | 80.11      | 88.65     | 86       | 51         | 62            | 38.78      | 51              | 40       | 54         | 81.02     | 74.47   |





#### üîÜÊé®ÁêÜÂ§ßÊ®°Âûã

#### 

| Model                | 1.TCM-ED-A | 2.TCM-ED-B | 3.TCM-FT  | 4.TCMeEE | 5.TCM-CHGD | 6.TCM-LitData | 7.TCM-MSDD | 8.TCM-Diagnosis | 9.TCM-PR | 10.TCM-FRD | 11.SE-A   | 12.SE-B   |
| -------------------- | ---------- | ---------- | --------- | -------- | ---------- | ------------- | ---------- | --------------- | -------- | ---------- | --------- | --------- |
| o4-mini              | 70.92      | 74.42      | 86.88     | 78       | 45         | 61            | 17.25      | 51              | 26       | 43         | 55.3      | 54        |
| o4-mini Few-Shot     | 69.92      | 74.34      | 86.21     | 79       | 47         | **64**        | 28.06      | **52**          | 38       | 52         | 58.55     | 70.21     |
| qwen3-235B           | 86.83      | 91.54      | **88.29** | 53       | **58**     | 60            | 42         | 49              | 35       | 46         | 71.36     | 86        |
| qwen3-235B Few-Shot  | 87.13      | 89.58      | 87.51     | 79       | 50         | 60            | **50**     | 50              | 40       | **54**     | 70.32     | 80.85     |
| DeepSeek-r1          | 89.08      | 91.17      | 87.66     | **87**   | 48         | 62            | 39.25      | 50              | 39       | 41         | **85.86** | 82        |
| DeepSeek-r1 Few-Shot | **92.40**  | **92.33**  | 84.21     | 83       | 52         | 61            | 40.05      | 49              | **41**   | 52         | 86.26     | **89.36** |




#### üîÜÂåªÂ≠¶‰∏ì‰∏öÂ§ßÊ®°Âûã

#### 

| Model            | 1.TCM-ED-A | 2.TCM-ED-B | 3.TCM-FT  | 4.TCM-eEE | 5.TCM-CHGD | 6.TCM-LitData | 7.TCM-MSDD | 8.TCM-Diagnosis | 9.TCM-PR | 10.TCM-FRD | 11.SE-A   | 12.SE-B |
| ---------------- | ---------- | ---------- | --------- | --------- | ---------- | ------------- | ---------- | --------------- | -------- | ---------- | --------- | ------- |
| WINGPT2-14B-Chat | 40.25      | 40.98      | 84.42     | 57        | 40         | 44            | 17         | 45              | 22       | 35         | 43.2      | 46      |
| WINGPT2-14B-Chat Few-Shot         | 41         | 44.9       | 85.13     | 69        | 44         | 38            | 23         | 48              | 21       | **43**     | 39.38     | 44      |
| WINGPT2-14B-Chat CoT              | 42.08      | 41.88      | 84.66     | 52        | 42         | 36            | 16.75      | 47              | 19       | 30         | 43.1      | 32      |
| TaiYi-LLM        | 39.92      | 47.71      | 82.82     | 49        | 29         | **61**        | 13.5       | 49              | 11       | 30         | 24.07     | 28      |
| TaiYi-LLM Few-Shot         | 39.67      | 42.94      | 80.18     | 55        | 25         | 43            | 35.5       | 48              | 19       | 29         | 28.13     | 40      |
| TaiYi-LLM CoT              | 39.17      | 39.54      | 78.83     | 32        | 32         | 47            | 31.75      | 35              | 10       | 29         | 25.73     | 30      |
| DISC-MedLLM      | 31.33      | 32.42      | 80.34     | 45        | 34         | 19            | 3          | 44              | 19       | 26         | 35        | 0       |
| DISC-MedLLM Few-Shot         | 27.17      | 29.31      | 82.88     | 31        | 28         | 22            | 1.5        | 38              | 17       | 32         | 37.42     | 2       |
| DISC-MedLLM CoT              | 26.58      | 31.42      | 83.45     | 24        | 23         | 24            | 4          | 37              | 7        | 25         | 42.52     | 0       |
| HuatuoGPT-o1-72b | 75.17      | **82.27**  | 86.32     | 82        | 45         | 40            | 20.25      | 45              | 24       | **45**     | 51.3      | 70      |
| HuatuoGPT-o1-72b Few-Shot         | 73         | 81.13      | 86.91     | 80        | **48**     | 44            | 34.25      | 41              | 32       | 34         | 52.2      | 68      |
| HuatuoGPT-o1-72b CoT              | 72         | 79.13      | 86.86     | 82        | **48**     | 43            | 30         | 42              | 26       | 35         | 58.65     | 70      |
| Baichuan-14b-M1  | 79.83      | 82.02      | **87.49** | 82        | 46         | **63**        | 35.5       | 46              | 33       | 38         | 70.36     | 66      |
| Baichuan-14b-M1 Few-Shot         | 28.5       | 80.88      | 87.31     | 80        | 42         | 57            | **46.75**  | **51**          | **38**   | 32         | 73.36     | **72**  |
| Baichuan-14b-M1 CoT              | **85.08**  | 55.81      | 87.07     | **84**    | 44         | 34            | 36.5       | **51**          | 37       | 20         | **76.09** | 68      |

## üòäÊï∞ÊçÆÈõÜÊèèËø∞

#### ÁªìÊûÑ

Êï∞ÊçÆÈõÜÔºö**5**‰∏™Áª¥Â∫¶Ôºå**12**‰∏™Êï∞ÊçÆÈõÜ

ËØ≠Ë®ÄÁêÜËß£„ÄÅËØäÊñ≠„ÄÅÊñπÂâÇÊé®Ëçê„ÄÅÂÆâÂÖ®ËØÑ‰ª∑**4‰∏™Áª¥Â∫¶**ÁöÑÊï∞ÊçÆÈáèÂàÜÂ∏ÉÂ¶Ç‰∏ãÂõæÊâÄÁ§∫

![pie-nest](https://github.com/Wayyuanyuan/MTCMB/blob/main/pics/area-stack%20-ch.png)

ü•∏ **Áü•ËØÜÈóÆÁ≠î**Áª¥Â∫¶ÂåÖÂê´‰∏â‰∏™Êï∞ÊçÆÈõÜÔºåÂàÜÂà´ÊòØTCM-ED-AÔºà1200Ôºâ„ÄÅTCM-ED-BÔºà4800Ôºâ„ÄÅTCM-FTÔºà100Ôºâ



- **Áü•ËØÜÈóÆÁ≠î**ÔºöÈÄöËøá‰∏≠Á∫ß‰∏ªÊ≤ªÂåªÂ∏àÂíåÊâß‰∏öÂåªÂ∏àËÄÉËØïÈ¢òÁõÆ‰ª•ÂèäÊ†áÂáÜÈóÆÁ≠îÈ¢òÂΩ¢ÂºèÔºåËÄÉÂØüÂ§ßÊ®°ÂûãÂØπ‰∏≠ÂåªÂü∫Á°ÄÁêÜËÆ∫„ÄÅÊñπÂâÇÂ≠¶„ÄÅÈíàÁÅ∏Â≠¶„ÄÅËØäÊñ≠Â≠¶Á≠âÊ†∏ÂøÉÁü•ËØÜÁöÑÁêÜËß£‰∏éÂ∫îÁî®ËÉΩÂäõ„ÄÇ

- **ËØ≠Ë®ÄÁêÜËß£**ÔºöÈÄöËøáÂåªÊ°à‰∏≠ÁöÑÂÆû‰ΩìÊäΩÂèñ„ÄÅ‰ªéÂåªÊÇ£ÂØπËØùÁîüÊàêÁªìÊûÑÂåñÂåªÊ°à‰ª•ÂèäÂü∫‰∫éÊñáÁåÆÂÜÖÂÆπÂõûÁ≠îÈóÆÈ¢òÁ≠âÂΩ¢ÂºèÔºåËØÑ‰º∞Â§ßÊ®°ÂûãÂú®‰∏≠ÂåªÊñáÊú¨ÁêÜËß£Âíå‰ø°ÊÅØÊäΩÂèñÊñπÈù¢ÁöÑË°®Áé∞Âäõ‰∏éÂáÜÁ°ÆÊÄß„ÄÇ

- **ËØäÊñ≠**ÔºöËÄÉÂØüÂ§ßÊ®°ÂûãÊ†πÊçÆÊÇ£ËÄÖ‰∏¥Â∫ä‰ø°ÊÅØÔºàÂ¶ÇÁóáÁä∂„ÄÅ‰ΩìÂæÅ„ÄÅËàåËÑâÁ≠âÔºâËøõË°åËæ®ËØÅÂàÜÊûêÔºåÂπ∂ÂáÜÁ°ÆÂà§Êñ≠ÁñæÁóÖÂêçÁß∞‰∏éËØÅÂûãÁöÑËÉΩÂäõ„ÄÇ

- **ÊñπÂâÇÊé®Ëçê**ÔºöËØÑ‰º∞Â§ßÊ®°ÂûãÊ†πÊçÆÁóÖÊÉÖÊèèËø∞ÂíåËØÅÂûãÁâπÂæÅÔºåÊé®ËçêÂêàÈÄÇ‰∏≠ËçØÊñπÂâÇÁöÑËÉΩÂäõÔºåÊ∂µÁõñÂØπÊñπÂâÇÁªÑÊàê„ÄÅÈÖç‰ºçËßÑÂæãÂèäÁóÖÁóáÂØπÂ∫îÂÖ≥Á≥ªÁöÑÁêÜËß£„ÄÇ

- **ÂÆâÂÖ®ËØÑ‰ª∑**ÔºöÈÄöËøáÂ°´Á©∫È¢ò‰∏éÈÄâÊã©È¢òÁöÑÂΩ¢ÂºèÔºåËÄÉÂØüÂ§ßÊ®°ÂûãËØÜÂà´‰∏≠ÂåªÂÆûË∑µ‰∏≠Ê∂âÂèäÁöÑÂÆâÂÖ®È£éÈô©ÔºåÂ¶ÇÊúâÊØí‰∏≠ËçØÂâÇÈáèÊéßÂà∂„ÄÅÂ≠ïÂ¶áÁ¶ÅÁî®ËçØÂèäÈíàÁÅ∏Á¶ÅÂøåÁ≠âÂÜÖÂÆπÔºåÁ°Æ‰øùÂÖ∂ÂÖ∑Â§áÂü∫Êú¨ÁöÑ‰∏¥Â∫äÂÆâÂÖ®ÊÄßÂà§Êñ≠ËÉΩÂäõ„ÄÇ

  

#### ËØ¶ÁªÜ‰ø°ÊÅØ

**ÁÇπÂáªË∂ÖÈìæÊé•ÂèØ‰ª•Êü•ÁúãÂà∞‰∏çÂêåÊï∞ÊçÆÈõÜÊ†ºÂºèË¶ÅÊ±Ç**‚¨ÖÔ∏è‚¨ÖÔ∏è

| Áª¥Â∫¶         | Êï∞ÊçÆÈõÜÂêçÁß∞    | Êï∞Èáè  | ‰ªªÂä°ÊèèËø∞                                               | Êï∞ÊçÆÊù•Ê∫ê                                                     | ÊûÑÂª∫ÊñπÂºè                                      | ËØÑ‰º∞ÊñπÊ≥ï                           |
| ------------ | ------------- | ----- | ------------------------------------------------------ | ------------------------------------------------------------ | --------------------------------------------- | ---------------------------------- |
| ‰∏≠ÂåªÁü•ËØÜÈóÆÁ≠î | [TCM-ED-A](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-ED-A.md)      | 1,200 | ÂçïÈ°πÈÄâÊã©È¢ò                                             | ‰∏≠Âåª‰∏≠Á∫ß‰∏ªÊ≤ªÂåªÂ∏àËÄÉËØïÁöÑ12‰∏™Â≠¶Áßë                               | ÊØè‰∏™Â≠¶ÁßëÈöèÊú∫ÊäΩÂèñ100ÈÅìÈ¢òÁõÆ                     | ÂáÜÁ°ÆÁéá                             |
|              | [TCM-ED-B](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-ED-B.md)     | 4800  | ÂçïÈ°πÈÄâÊã©È¢ò                                             | Êâß‰∏öÂåªÂ∏àÈ¢òÂ∫ì                                                 | 8‰ªΩÂÆåÊï¥ÁöÑÊâß‰∏öÂåªÂ∏àËØïÂç∑                         | ÂáÜÁ°ÆÁéá                             |
|              | [TCM-FT](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-FT.md)       | 100   | ÈóÆÁ≠îÈ¢ò                                                 | „Ää‰∏≠ÂåªÂ≠¶ÈóÆÁ≠îÈ¢òÂ∫ì„ÄãËÉ°ÁÜôÊòé‰∏ªÁºñ                                 | ‰ªéÈ¢òÂ∫ì‰∏≠ÈöèÊú∫ÊäΩÂèñ100ÈÅìÈóÆÁ≠îÈ¢òÔºåÂπ∂Áî±‰∏ì‰∏ö‰∫∫ÂëòÂÆ°Ê†∏ | BertScore                          |
| ‰∏≠ÂåªËØ≠Ë®ÄÁêÜËß£ | [TCMeEE](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCMeEE.md)        | 100   | Ê†πÊçÆÂåªÊ°àËØÜÂà´Âπ∂ÊäΩÂèñ‰∏é‰∏≠ÂåªÁõ∏ÂÖ≥ÁöÑÂÆû‰ΩìÔºåÁîüÊàêÁªìÊûÑÂåñÁóÖÂéÜ„ÄÇ   | ÂåªÊ°àÊù•Ê∫ê‰∫é[„Ää‰∏≠ÂåªÊô∫Â∫ì„Äã](https://zhongyigen.com/)ÁΩëÁ´ôÂèäÊπñÂçó‰∏≠ÂåªËçØÂ§ßÂ≠¶Êèê‰æõÁöÑÁúüÂÆûÂåªÊ°à | ‰ΩøÁî®deepseek-r1Ê®°ÂûãÁîüÊàêÁ≠îÊ°àÂêéÔºåÁî±‰∏ì‰∏ö‰∫∫ÂëòÂ§çÊ†∏ | BERTScore„ÄÅROUGE Âíå BLEU‰∏âËÄÖÂèñÂπ≥Âùá |
|              | [TCM-CHGD](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-CHGD.md)      | 100   | Ê†πÊçÆÂåªÊÇ£ÂØπËØùÁîüÊàêÂåªÊ°à„ÄÇ                                 | Ë∞ÉÁî®deepseek r1Âü∫‰∫éÁúüÂÆûÂåªÊ°àÁîüÊàêÂåªÊÇ£ÂØπËØù                      | 100‰ªΩÂåªÊ°àÈÄÜÂêëÁîüÊàêÂåªÊÇ£ÂØπËØù                     | BERTScore„ÄÅROUGE Âíå BLEU‰∏âËÄÖÂèñÂπ≥Âùá |
|              | [TCM-LitData](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-LitData.md)   | 100   | Ê†πÊçÆÊñáÁåÆÂÜÖÂÆπÂõûÁ≠îÈóÆÈ¢ò„ÄÇ                                 | [ÈòøÈáå‰∫ëÂ§©Ê±†ÂÆûÈ™åÂÆ§ÁöÑ‰∏≠ÂåªÊñáÁåÆÈóÆÈ¢òÁîüÊàêÊï∞ÊçÆÈõÜ](https://tianchi.aliyun.com/dataset/86895) | ‰ªéÊï∞ÊçÆÈõÜÈöèÊú∫ÊäΩÂèñ100ÈÅìÈ¢òÁõÆÔºåÂπ∂‰∏îÁî±‰∏ì‰∏ö‰∫∫ÂëòÂ§çÊ†∏ | ROUGE Âíå BLEU‰∫åËÄÖÂèñÂπ≥Âùá            |
| ‰∏≠ÂåªËØäÊñ≠     | [TCM-MSDD](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-MSDD.md)      | 100   | ‰ªé‰∏¥Â∫ä‰ø°ÊÅØÊé®Êñ≠ÂØπÂ∫îÁöÑËØÅÂûãÂíåÁñæÁóÖÂêçÁß∞„ÄÇ                   | [ÈòøÈáå‰∫ëÂ§©Ê±†ÂÆûÈ™åÂÆ§CCL25-Eval‰ªªÂä°9Êï∞ÊçÆÈõÜÂ≠ê‰ªªÂä°1](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-MSDD)             | ÈöèÊú∫ÊäΩÂèñ100ÈÅìÂπ∂‰∏îÁî±‰∏ì‰∏ö‰∫∫ÂëòÂ§çÊ†∏               | CCL25-Eval ‰ªªÂä°9ÁöÑtask1_score      |
|              | [TCM-Diagnosis](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-Diagnosis.md) | 200   | Ê†πÊçÆÁóáÁä∂Ë°®Áé∞ÁªôÂá∫ÁñæÁóÖÂêçÁß∞„ÄÅËØÅÂêç„ÄÅÁóÖ‰Ωç„ÄÅÁóÖÊÄß„ÄÇ           | ÊπñÂçó‰∏≠ÂåªËçØÂ§ßÂ≠¶Êèê‰æõÁöÑÁúüÂÆûÂÜÖÂ§ñÂ¶áÂÑøËØÅÂûãÊï∞ÊçÆÈõÜ                   | ÊåâÁÖßÂÜÖÂ§ñÂ¶áÂÑøÂõõ‰∏™ÁßëÁõÆÊØèÁßëÊäΩÂèñ50‰æã              | BERTScore„ÄÅROUGE Âíå BLEU‰∏âËÄÖÂèñÂπ≥Âùá |
| ÊñπÂâÇÊé®Ëçê     | [TCM-PR](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-PR.md)        | 100   | Ê†πÊçÆ‰∏¥Â∫ä‰ø°ÊÅØÊé®ËçêÂêàÈÄÇÁöÑ‰∏≠ËçØÂ§ÑÊñπ„ÄÇ                       | [ÈòøÈáå‰∫ëÂ§©Ê±†ÂÆûÈ™åÂÆ§CCL25-Eval‰ªªÂä°9Êï∞ÊçÆÈõÜÂ≠ê‰ªªÂä°2]()             | ‰ªéÊï∞ÊçÆÈõÜÈöèÊú∫ÊäΩÂèñ100ÈÅìÈ¢òÁõÆÔºåÂπ∂‰∏îÁî±‰∏ì‰∏ö‰∫∫ÂëòÂ§çÊ†∏ | CCL25-Eval ‰ªªÂä°9ÁöÑtask2_score      |
|              | [TCM-FRD](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/TCM-FRD.md)       | 200   | Ê†πÊçÆËØÅÁöÑË°®Áé∞ÁªôÂá∫Ê≤ªÊ≥ï„ÄÅÊñπÂâÇÂêç„ÄÅËçØÁâ©ÁªÑÊàêÔºà‰∏çÂåÖÂê´ÂâÇÈáèÔºâ„ÄÇ | ÊπñÂçó‰∏≠ÂåªËçØÂ§ßÂ≠¶Êèê‰æõÁöÑÁúüÂÆûÂÜÖÂ§ñÂ¶áÂÑøËØÅÂûãÊï∞ÊçÆÈõÜ                   | ÂÜÖÂ§ñÂ¶áÂÑøÂÖ±ÊäΩÂèñ200‰æã                           | BERTScore„ÄÅROUGE Âíå BLEU‰∏âËÄÖÂèñÂπ≥Âùá |
| ‰∏≠ÂåªÂÆâÂÖ®ËØÑ‰ª∑ | [SE-A](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/SE-A%262.md)     | 50    | Â°´Á©∫È¢ò                                                 | ÊπñÂçó‰∏≠ÂåªËçØÂ§ßÂ≠¶Êèê‰æõÁöÑÂÆâÂÖ®ÊÄßÈóÆÈ¢òÊï∞ÊçÆÈõÜ                         | Â∏∏ËßÅ‰∏≠ËçØÂèäÈíàÁÅ∏Á¶ÅÂøåÂ°´Á©∫È¢òÔºà50È¢òÔºâ              | Â§ßÊ®°ÂûãËØÑÂàÜ                         |
|              | [SE-B](https://github.com/Wayyuanyuan/MTCMB/blob/main/dataset_info/SE-A%262.md)     | 50    | ÈÄâÊã©È¢ò                                                 | ÊπñÂçó‰∏≠ÂåªËçØÂ§ßÂ≠¶Êèê‰æõÁöÑÂÆâÂÖ®ÊÄßÈóÆÈ¢òÊï∞ÊçÆÈõÜ                         | Â∏∏ËßÅ‰∏≠ËçØÂèäÈíàÁÅ∏Á¶ÅÂøåÈÄâÊã©È¢òÔºà50È¢òÔºâ              | ÂáÜÁ°ÆÁéá                             |



## üîÜÂ¶Ç‰ΩïÊèê‰∫§ÂíåËØÑ‰º∞

### ÁéØÂ¢ÉÈÖçÁΩÆ


Á°Æ‰øù‰Ω†ÁöÑÂºÄÂèëÁéØÂ¢ÉÂ∑≤ÁªèÂÆâË£Ö‰∫Ü[Êñá‰ª∂](https://github.com/Wayyuanyuan/MTCMB/blob/main/requirements.txt)Ë¶ÅÊ±ÇÁöÑPythonÂ∫ì

### ÈóÆÁ≠îÊ®°Âùó

ÁõÆÂâçÊèê‰æõÂü∫‰∫éOpenAIÂ∫ìÁöÑË∞ÉÁî®Ê®°ÁâàÔºåÂπ∂‰∏îÊèê‰æõ‰∏âÂ•óHuggingFace‰∏äÂºÄÊ∫êÂ∫ìÁöÑË∞ÉÁî®Ê®°ÁâàÔºåÂàÜÂà´ÊòØ`HuatuoGPT-II`Ôºå`Taiyi-LLM`Âíå`WiNGPT2`Ë∞ÉÁî®„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂÖ∂‰ªñÊõ¥Â§öË∞ÉÁî®ÁöÑÊîØÊåÅÔºåËØ∑ÁªßÊâøËá™`make_answer/chat/chat_invoker.py`Ê®°Âùó‰∏≠ÁöÑ`ChatInvoker`Êé•Âè£„ÄÇ

#### Âü∫‰∫éOpenAIÂ∫ìÁöÑË∞ÉÁî®Ê®°Áâà

`Ê®°ÂùóÂêç.Ë∞ÉÁî®llmÊñá‰ª∂`.py


```python
import os
import openai

from loguru import logger
from make_answer.chat.chat_invoker import ChatInvoker


class LlmOpenai(ChatInvoker):
    def __init__(self, *args, **kwargs):
        base_url = os.environ.get("OPENAI_BASE_URL")
        if "base_url" in kwargs:
            base_url = kwargs["base_url"]
        api_key = os.environ.get("OPENAI_API_KEY")
        if "api_key" in kwargs:
            api_key = kwargs["api_key"]
        self.client = openai.OpenAI(
            base_url=base_url, api_key=api_key)
        self.model_name = kwargs["model_name"]

    def chat(self, msg: str, *args, **kwargs) -> str:
        response = self.client.chat.completions.create(
            model=self.model_name,
            messages=[
                {"role": "system", "content": "‰Ω†ÊòØ‰∏Ä‰∏™‰∏ì‰∏ö‰∏≠ÂåªÂåªÁîüÔºåËÉΩÂ§üÂáÜÁ°ÆÂÖ®Èù¢ÁöÑËß£Á≠î‰∏≠ÂåªÈóÆÈ¢ò„ÄÇÊú¨Ê¨°ÂØπËØùÔºåÂùáÂè™ÈááÁî®‰∏≠ÊñáÊèêÈóÆÂíåÂõûÁ≠î„ÄÇ"},
                {"role": "user", "content": msg}
            ]
        )
        try:
            ret = response.choices[0].message.content
        except Exception as e:
            logger.exception(f"call openai chat api error: {response}")
            raise e

        return ret
```

##### ‰ΩøÁî®ÊñπÂºè

```python
python main.py \
--step-chat data/ \ # ÊµãËØïÈóÆÈ¢òÊâÄÂú®Êñá‰ª∂Â§π
--api-model Ê®°ÂùóÂêç.Ë∞ÉÁî®llmÊñá‰ª∂.Á±ªÂêç \ # Ëá™ÂÆö‰πâÊµãËØïÊ®°ÂûãÔºåÈúÄË¶ÅÁªßÊâøËá™ChatInvokerÔºå‰º†ÂÖ•ÂÆåÊï¥Ê®°ÂùóÂêç„ÄÅÊñá‰ª∂ÂêçÂíåÁ±ªÂêç
--api-model-name Ë∞ÉÁî®ÁöÑÂ§ßÊ®°ÂûãÂêçÁß∞ \ # Â§ßÊ®°ÂûãÂêçÁß∞ÔºåÁî®‰∫éÂå∫ÂàÜË∞ÉÁî®ÁöÑ‰∏çÂêåÊ®°ÂûãÔºå‰ª•Âèä‰∏çÂêåÊ®°ÂûãÁªìÊûú
--base-url Ê®°ÂûãË∞ÉÁî®url \ # Ê®°Âûãurl
--api-key Ê®°Âûãkey  # Ë∞ÉÁî®Ê®°Âûãkey
```

##### Âü∫‰∫éOpenAIÂ∫ìÁöÑË∞ÉÁî®Á§∫‰æã

```
python main.py --step-chat data --api-model make_answer.chat.remote.openai_api.LlmOpenai --llm-name your_model_name  --base-url your_url --api-key your_key --num-process 12 --prompt-type 0/1/2  #ËÆæÁΩÆÊèêÁ§∫ËØçÁ±ªÂûãÔºå0‰ª£Ë°®zero-shot,1‰ª£Ë°®few-shot,2‰ª£Ë°®CoT'
```



#### Âü∫‰∫éÊú¨Âú∞Ë∞ÉÁî®ÂΩ¢Âºè

`Ê®°ÂùóÂêç.Ë∞ÉÁî®llmÊñá‰ª∂`.py

```python
import torch
from transformers import AutoTokenizer, AutoModelForCausalLM

from make_answer.chat.chat_invoker import ChatInvoker


class LocalLLM(ChatInvoker):
    def __init__(self, model_path: str, gpu_id: int = 0):
        # Ê®°ÂûãÂàùÂßãÂåñÔºå‰ªÖÂú®È¶ñÊ¨°ËøêË°åÊó∂ÊâßË°å„ÄÇ

    def chat(
            self, msg: str, *args, **kwargs
    ) -> str:
        # ËØ∑Ê±ÇÊ®°ÂûãÂõûÁ≠îÔºåmsg‰∏∫ÂøÖÂ°´ÂèÇÊï∞„ÄÇ
```

##### ‰ΩøÁî®ÊñπÂºè

```python
python main.py \
--step-chat data/ \ # ÊµãËØïÈóÆÈ¢òÊâÄÂú®Êñá‰ª∂Â§π
--local-model /Path/To/LLM \ # Êú¨Âú∞Â§ßÊ®°ÂûãÊâÄÂú®ÁõÆÂΩï
--model-type LLMÂêçÁß∞ # Â§ßÊ®°ÂûãÂêçÁß∞ÔºåÈúÄË¶ÅÂ∞ÜËá™ÂÆöÊ®°ÁâàÊûÑÈÄ†ÂáΩÊï∞ÂÜôÂú®Ôºömake_answer/chat/__init__.pyÁöÑname_model_dict‰∏≠„ÄÇ
--prompt-type 0/1/2  #ËÆæÁΩÆÊèêÁ§∫ËØçÁ±ªÂûãÔºå0‰ª£Ë°®zero-shot,1‰ª£Ë°®few-shot,2‰ª£Ë°®CoT'
```

##### ‰∏Ä‰∏™Á§∫‰æã

```
python main.py --step-chat data/ --local-model  /mnt/data1/MedLLM_baselines/Taiyi --model-type taiyi
```

### ËØÑ‰º∞Ê®°Âùó

‰ΩøÁî®ÊñπÂºè

```python
python main.py \
--step-evaluate LLMÂõûÁ≠îÊâÄÂú®ÁõÆÂΩï \ # ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå ‰º†ÂÖ•Ê†πÁõÆÂΩï‰∏ãÊ®°ÂûãÂêçÁß∞
--standard-answer-root Ê†áÂáÜÁ≠îÊ°àÁõÆÂΩï # ‰º†ÂÖ•Ê†áÂáÜÁ≠îÊ°àÁõÆÂΩï
```



### ÂÖ∂‰ªñÂèÇÊï∞

 

| ÂèÇÊï∞ÂêçÁß∞      | ÈªòËÆ§ÂÄº | ‰ΩúÁî®                               |
| ------------- | ------ | ---------------------------------- |
| --num-process | 1      | Ë∞ÉÁî®Â§ßÊ®°ÂûãÂõûÁ≠î‰ª•ÂèäËØÑ‰º∞Êó∂Âπ∂ÂèëÁ∫øÁ®ãÊï∞ |
| --sleep-time  | 0      | Â§ßÊ®°ÂûãÂçïÊ¨°ÂõûÁ≠îÂêéÔºåÁ≠âÂæÖÁöÑÊó∂Èó¥„ÄÇ     |


## 

## Êèê‰∫§Ê†ºÂºèË¶ÅÊ±Ç



Êàë‰ª¨ÁöÑËØÑ‰º∞Âü∫ÂáÜÂåÖÊã¨11‰∏™Êï∞ÊçÆÈõÜÔºåÊØè‰∏™Êï∞ÊçÆÈõÜÂåÖÂê´Ëã•Âπ≤‰∏™È¢òÁõÆÔºåËøô‰∫õÈ¢òÁõÆÁöÑanswerÂ≠óÊÆµ‰∏∫Á©∫„ÄÇ‰∏Ä‰∏™ÁÆÄÁü≠ÁöÑÁ§∫‰æãÂ¶Ç‰∏ãÔºö

```
{"id":1,"question": "4.Èò¥‰∏≠Ê±ÇÈò≥ÁöÑÊ≤ªÊ≥ïÈÄÇÁî®‰∫é","options": ["A.Èò≥Áõõ","B.Èò¥Èò≥‰∏§Ëôö","C.Èò¥Ëôö","D.Èò≥Ëôö","E.Èò¥Áõõ"],"answer": ""   }
{"id":2,"question": "15.Á≤æË°ÄÂêåÊ∫êÊòØÊåá","options": ["A.ËÇùËÇæÂêåÊ∫ê","B.ÂøÉËÇæÂêåÊ∫ê","C.ËÑæËÉÉÂêåÊ∫ê","D.ËÑæËÇæÂêåÊ∫ê","E.ÂøÉËÑæÂêåÊ∫ê"],"answer": ""}
{"id":3,"question": "8.Ê∞îËôöËØÅÂèØËßÅ„ÄÇ","options": ["A.Ëá™Ê±ó","B.ÁõóÊ±ó","C.ÂçäË∫´Âá∫Ê±ó","D.ÊàòÊ±ó","E.Â§¥Ê±ó"],"answer": ""}
```

Êàë‰ª¨ÁöÑËØÑ‰º∞‰ª£Á†ÅË¶ÅÊ±ÇÊé•Âèó‰∏ãÈù¢ÁöÑÊï∞ÊçÆÊ†ºÂºèÔºå

```
{"id":1,"question": "4.Èò¥‰∏≠Ê±ÇÈò≥ÁöÑÊ≤ªÊ≥ïÈÄÇÁî®‰∫é","options": ["A.Èò≥Áõõ","B.Èò¥Èò≥‰∏§Ëôö","C.Èò¥Ëôö","D.Èò≥Ëôö","E.Èò¥Áõõ"],"answer": "D"   }
{"id":2,"question": "15.Á≤æË°ÄÂêåÊ∫êÊòØÊåá","options": ["A.ËÇùËÇæÂêåÊ∫ê","B.ÂøÉËÇæÂêåÊ∫ê","C.ËÑæËÉÉÂêåÊ∫ê","D.ËÑæËÇæÂêåÊ∫ê","E.ÂøÉËÑæÂêåÊ∫ê"],"answer": "A"}
{"id":3,"question": "8.Ê∞îËôöËØÅÂèØËßÅ„ÄÇ","options": ["A.Ëá™Ê±ó","B.ÁõóÊ±ó","C.ÂçäË∫´Âá∫Ê±ó","D.ÊàòÊ±ó","E.Â§¥Ê±ó"],"answer": "A"}
```

Êú¨Ë¥®‰∏äÊòØÂ∞ÜanswerÂ≠óÊÆµ‰ΩøÁî®Ê®°ÂûãÁöÑÂõûÁ≠îËøõË°åÂ°´ÂÖÖ„ÄÇËøô‰∫õÁöÑÊï∞ÊçÆË¢´‰øùÂ≠òÂú®mid.jsonlÊñá‰ª∂‰∏≠„ÄÇ

Êàë‰ª¨Êã•Êúâ12‰∏™Êï∞ÊçÆÈõÜÔºåÊàë‰ª¨ÊúüÂæÖÈááÁî®‰ª•‰∏ãÁöÑÂëΩÂêçÊñπÂºèÊèê‰∫§

```
‰∏ÄÁ∫ßÁõÆÂΩï ÔºàÊ®°ÂûãÂêçÔºâ
‚îú‚îÄ‚îÄ TCM-ED-A
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-ED-B
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-FT
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCMeEE
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-CHGD
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-LitData
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-MSDD
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-Diagnosis
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-PR
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ TCM-FRD
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ SE-A
‚îÇ   ‚îî‚îÄ‚îÄ mid.jsonl
‚îú‚îÄ‚îÄ SE-B
   ‚îî‚îÄ‚îÄ mid.jsonl

```

ËØ∑Â∞ÜÊñá‰ª∂‰ª•ÂéãÁº©ÂåÖÂΩ¢ÂºèÊèê‰∫§Ôºå‰æãÂ¶Ç **gemini-1.5-pro.zip**„ÄÇÂéãÁº©ÂåÖËØ∑ÂèëÈÄÅËá≥ÈÇÆÁÆ± **weiyy53@mail2.sysu.edu.cn**„ÄÇ
Êàë‰ª¨Â∞ÜÂú®ËØÑ‰º∞ÂÆåÊàêÂêéÔºå‰∫é **GitHub** Âπ≥Âè∞ÂÖ¨Â∏ÉÁªìÊûú„ÄÇ  

Â¶ÇÊúâÁñëÈóÆÔºåËØ∑ÈöèÊó∂‰∏éÊàë‰ª¨ËÅîÁ≥ª„ÄÇ


## Ëá¥Ë∞¢


Êàë‰ª¨Ë°∑ÂøÉÊÑüË∞¢ÊâÄÊúâÂØπÊú¨È°πÁõÆÁªô‰∫àÊîØÊåÅÂíåÂ∏ÆÂä©ÁöÑÂçï‰Ωç‰∏é‰∏™‰∫∫„ÄÇüéâüéâüéâ  

ÂêåÊó∂ÔºåÂêëÂèÇ‰∏éÊú¨È°πÁõÆÁöÑÂÖ®‰ΩìÊàêÂëòË°®Á§∫ËØöÊåöÁöÑÊÑüË∞¢ÔºÅ 



